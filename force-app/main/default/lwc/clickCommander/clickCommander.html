<template>
    <template if:true={showModal}>
        <section aria-modal="true" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
				<header class="slds-modal__header">
                    <h2 class="titre">{productName}</h2>
					<lightning-icon class="slds-modal__close" icon-name="utility:close" size="small"
						onclick={closeModal}></lightning-icon>
				</header>
                <div class="slds-modal__content modalBodySpinner">
                    <div class="slds-p-around_small">

                        <!--Vouchers Form-->                       
                        <template if:true={showVoucherForm}>
                            
                            <div class="row">
                                <div class="image">
                                    <lightning-formatted-rich-text value={productImage}></lightning-formatted-rich-text>
                                </div>
                                <div class="formulaire">
                                    <div class="input-group">
                                        <div class="nom">
                                            <label for="voucherValue">Valeur de chèque (TND):</label>
                                        </div>
                                        <div class="counter">
                                            <div class="counter-decrease" onclick={decreaseVoucherValue}>
                                                <span>-</span>
                                            </div>
                                            <div class="counter-input">
                                                <input class="counter-value" id="voucherValue" onchange={HandelvoucherValueChange} value={voucherValue} name="voucherValue" type="number" required></input>
                                            </div>
                                            <div class="counter-increase" onclick={increaseVoucherValue}>
                                                <span>+</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="input-group">
                                        <div class="nom">
                                            <label for="NumberOfVouchersPerBooklet">Nombre de chèque par carnet :</label>
                                        </div>
                                        <div class="counter">
                                            <div class="counter-decrease" onclick={decreaseNumberOfVouchersPerBooklet}>
                                                <span>-</span>
                                            </div>
                                            <div class="counter-input">
                                                <input class="counter-value" id="NumberOfVouchersPerBooklet" onchange={HandelNumberOfVouchersPerBookletChange} value={NumberOfVouchersPerBooklet} name="NumberOfVouchersPerBooklet" type="number" required></input>
                                            </div>
                                            <div class="counter-increase" onclick={increaseNumberOfVouchersPerBooklet}>
                                                <span>+</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="input-group">
                                        <div class="nom">
                                            <label for="Quantity">Quantité :</label>
                                        </div>
                                        <div class="counter">
                                            <div class="counter-decrease" onclick={decreaseQuantity}>
                                                <span>-</span>
                                            </div>
                                            <div class="counter-input">
                                                <input class="counter-value" id="Quantity" onchange={HandelQuantityChange} value={Quantity} name="Quantity" type="number" required></input>
                                            </div>
                                            <div class="counter-increase" onclick={increaseQuantity}>
                                                <span>+</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="total-price">
                                    <div class="labelP">
                                        <label>Prix Total :   </label>
                                    </div>    
                                    <div class="champP">
                                        <h1>{returnTotalPriceVouchers} TND</h1>
                                    </div>
                                </div>
                            </div>
                            
                            <!--
                            <div class="formulaire">
                                <div class="label">
                                    <label for="voucherValue">Valeur de chèque (TND) :</label>
                                </div>    
                                <div class="champ">
                                    <input class="entree" 
                                        placeholder="Valeur de chèque (TND)" 
                                        id="voucherValue" onchange={HandelvoucherValueChange} 
                                        value={voucherValue} 
                                        name="voucherValue" 
                                        type="number" 
                                        required/>
                                    <span class="fin"></span>
                                </div>                      
                            </div>  
            
                            <div class="formulaire">
                                <div class="label">
                                    <label for="NumberOfVouchersPerBooklet">Nombre de chèque par carnet :</label>
                                </div>    
                                <div class="champ">
                                    <input class="entree" 
                                        placeholder="Nombre de chèque par carnet" 
                                        id="NumberOfVouchersPerBooklet" 
                                        onchange={HandelNumberOfVouchersPerBookletChange} 
                                        value={NumberOfVouchersPerBooklet} 
                                        name="NumberOfVouchersPerBooklet" 
                                        type="number" 
                                        required/>
                                    <span class="fin"></span>
                                </div>
                            </div>    
            
                            <div class="formulaire">
                                <div class="label">
                                    <label for="Quantity">Quantité :</label>
                                </div>    
                                <div class="champ">
                                    <input class="entree" 
                                        placeholder="Quantité" 
                                        id="Quantity" 
                                        onchange={HandelQuantityChange} 
                                        value={Quantity} 
                                        name="Quantity" 
                                        type="number" 
                                        required/>
                                    <span class="fin"></span>
                                </div>
                            </div>    
            
                            <div class="formulaire">
                                <div class="label">
                                    <label>Prix Total</label>
                                </div>    
                                <div class="champ">
                                    <h2>{returnTotalPriceVouchers} TND</h2>                    
                                    <span class="fin"></span>
                                </div>
                            </div>
                            -->              
                        </template>


                        <!--Credit_Cards Form-->
                        <template if:true={showCreditCardForm}>
                            <div class="row">
                                <div class="image">
                                    <lightning-formatted-rich-text value={productImage}></lightning-formatted-rich-text>
                                </div>
                                <div class="formulaire">
                                    <div class="input-group">
                                        <div class="nom">
                                            <label for="recharcheValue">Valeur de la recharge (TND) :</label>
                                        </div>
                                        <div class="counter">
                                            <div class="counter-decrease" onclick={decreaseRecharcheValue}>
                                                <span>-</span>
                                            </div>
                                            <div class="counter-input">
                                                <input class="counter-value" id="recharcheValue" onchange={HandleRechargeValueChange} value={recharcheValue} name="recharcheValue" type="number" required></input>
                                            </div>
                                            <div class="counter-increase" onclick={increaseRecharcheValue}>
                                                <span>+</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="container">
                                    <div class="wrap">
                                        <h2>Ajouter Nouveaux Bénéficiaires</h2>
                                        <a href="#" onclick={addInput} class="add">&plus;</a>
                                    </div>
                                    <div class="inp-group">
                                        <template for:each={additionalInputs} for:item="input">
                                            <div class="flex" key={input.key}>
                                                <input class="inputB" placeholder="Nom Prénom" id={input.key} onchange={HandelFullNameChange} name={input.key} type="text" required></input>
                                                <input class="inputB" placeholder="CIN" id={input.key} data-index={index} onchange={HandelCINChange} name={input.key} type="number" required></input>
                                                <a href="#" class="delete" onclick={deleteInput} data-key={input.key}>&times;</a>
                                            </div>
                                        </template>                                    
                                    </div>
                                </div>
                                <div class="total-price">
                                    <div class="labelP">
                                        <label>Prix Total : </label>
                                    </div>    
                                    <div class="champP">
                                        <h1>{returnTotalPriceCards} TND</h1>
                                    </div>
                                </div>
                            </div>
                            

                            <!-- 
                            <div class="formulaire">
                                <div class="label">
                                    <label for="voucherValue">Recharge Value: (TND)</label>
                                </div> 
                                <div class="champ">
                                    <input class="entree" placeholder="VALEUR DE LA RECHARGE : (TND)" id="recharcheValue" name="recharcheValue" onchange={HandleRechargeValueChange} value={recharcheValue} type="number" required></input>
                                    <span class="fin"></span>
                                </div>
                            </div>   
                            
                            <div class="form-field">
                                <button class="bouton" onclick={addInput}>Add new beneficiaries</button>
                                <template for:each={additionalInputs} for:item="input">
                                    <div class="formulaire" key={input.key}>
                                        <div class="champ">
                                            <input class="entree" placeholder="Full Name" id={input.key} onchange={HandelFullNameChange} name={input.key} type="text" required></input>
                                            <span class="fin"></span>
                                        </div>
                                        <div class="champ">
                                            <input class="entree" placeholder="CIN" id={input.key} data-index={index} onchange={HandelCINChange} name={input.key} type="number" required></input>
                                            <span class="fin"></span>
                                        </div>
                                    </div>
                                </template>
                            </div>

                            <div class="formulaire">
                                <div class="label">
                                    <label>Total Price</label>
                                </div>    
                                <div class="champ">
                                    <h2>{returnTotalPriceCredit} TND</h2>                    
                                    <span class="fin"></span>
                                </div>
                            </div>
                            -->
                        </template>
                    </div>
                </div>

                <!--Footer-->
                <!--Vouchers Footer-->
                <template if:true={showVoucherForm}>
                    <footer class="slds-modal__footer">
                        <lightning-button label="Annuler" onclick={closeModal} class="slds-p-around_x-small">
                        </lightning-button>
                        <lightning-button variant="brand" label="Ajouter au panier" class="slds-p-around_x-small" 
                            if:false={isAddedToCart} type="submit" name="submit" onclick={handleAddVoucherToCart}></lightning-button>
                        <lightning-button variant="brand" label="Retirer de ma sélection" class="slds-p-around_x-small"
                            if:true={isAddedToCart} type="submit" name="submit" onclick={handleRemoveFromCart}></lightning-button>
                    </footer>
                </template>
                <!--Cards Vouchers-->
                <template if:true={showCreditCardForm}>
                    <footer class="slds-modal__footer">
                        <lightning-button label="Annuler" onclick={closeModal} class="slds-p-around_x-small">
                        </lightning-button>
                        <lightning-button variant="brand" label="Ajouter au panier" class="slds-p-around_x-small" 
                            if:false={isAddedToCart} type="submit" name="submit" onclick={handleAddCardToCart}></lightning-button>
                        <lightning-button variant="brand" label="Retirer de ma sélection" class="slds-p-around_x-small"
                            if:true={isAddedToCart} type="submit" name="submit" onclick={handleRemoveFromCart}></lightning-button>
                    </footer>
                </template>
                
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>